const{prompt:prompt}=require("enquirer"),axios=require("axios").default,cheerio=require("cheerio"),randomString="0123456789abcdefghijklmnopqrstuvwxyz",fs=require("fs");function generateRandomURL(){let t="http://prnt.sc/";for(let e=0;e<Math.floor(3*Math.random())+5;e++)t+=randomString.charAt(Math.floor(Math.random()*randomString.length));return t}async function isValidURL(t){if("8tdUI8N.png"===t.substring(19,30)||"http://img"===t.substring(0,10)||"//st"===t.substring(0,4)||""===t)return!1;if(-1!==t.search("imgur")){if(-1!==(await axios.get(t).catch(t=>console.log(t))).request.path.search("removed"))return!1}return"http"===t.substring(0,4)}let savedStuff="";function mainPrompt(){(async()=>{const t=await prompt({type:"input",name:"amount",message:"How much links to scrape?",initial:"5"}),e=parseInt(t.amount);console.assert(!isNaN(e),"Must be a valid number.");let o=0;for(;o!==e;){const t=Date.now(),e=generateRandomURL(),r=await axios.get(e).catch(t=>console.log(t));let a=(await cheerio.load(r.data))("#screenshot-image")[0];a&&(a=a.attribs.src||a),a&&(await isValidURL(a)&&(savedStuff=savedStuff+e+"\n",console.log(e,(Date.now()-t)/1e3+" secs took"),o++))}const r=await prompt({type:"input",name:"option",message:"Save or exit or continue?"});"e"===r.option.substr(0,1)?process.exit(0):"s"===r.option.substr(0,1)?fs.writeFile("./dump.txt",savedStuff,t=>{t?console.error(t):(console.log("Success!"),process.exit(0))}):(r.option.substr(0,1),mainPrompt())})()}mainPrompt();